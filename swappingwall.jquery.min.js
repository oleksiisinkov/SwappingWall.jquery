!function(a){a.fn.SwappingWall=function(b){if(void 0===b.itemsInRow||null===b.itemsInRow)throw new Error("ItemsInRow parameter is required");var e,c=this,d=c.children().length-1;c.addClass("swappingwall"),c.children().css("position","relative"),c.children().css("overflow","hidden"),c.children().css("height","auto"),c.children().css("float","left");var f={itemsInRow:0,time:2500,duration:500,stop:!1,mainWidth:"",br_settings:"",setValues:function(a,b,d,e){this.itemsInRow=a,c.children().css("width",""+100/this.itemsInRow+"%"),void 0===b&&null===b||b>1e3&&(this.time=b),void 0===d&&null===d||d>300&&(this.duration=d),void 0===e&&null===e||(this.stop=e),this.time-this.duration<300&&(this.time=2500,this.duration=500),this.stop!==!0&&this.timer()},setValuesByWidth:function(){this.mainWidth=a(window).width(),this.br_settings=b.responsive;for(var c=[],d=0;d<this.br_settings.length;d++)c.push(this.br_settings[d].breakpoint);this.closestHighter(c,this.mainWidth,function(a){if(0==a)return this.setValues(b.itemsInRow,b.time,b.duration),!1;for(var c=0;c<this.br_settings.length;c++)if(this.br_settings[c].breakpoint==a){this.setValues(this.br_settings[c].itemsInRow,this.br_settings[c].time,this.br_settings[c].duration,this.br_settings[c].stop);break}}.bind(this))},timer:function(){e=setInterval(this.animation.calculate.bind(this),this.time)},animation:{index:"",edgeNumbers:[],choosenItemFirst:"",choosenItemSecond:"",choosenItemFirstHeight:"",choosenItemFirstWidth:"",choosenItemSecondHeight:"",choosenItemSecondWidth:"",firstItemPosition:"",secondItemPosition:"",moveDistance1:"",moveDistance2:"",target:"",arr:[1,2],calculate:function(){this.animation.index=this.getRandomInt(d),setTimeout(function(){this.animation.edgeNumbers=[];for(var a=this.itemsInRow-1;a<=d;a+=this.itemsInRow)this.animation.edgeNumbers.push(a);this.animation.choosenItemFirst=c.children().eq(this.animation.index),this.animation.choosenItemFirstHeight=this.animation.choosenItemFirst.height(),this.animation.choosenItemFirstWidth=this.animation.choosenItemFirst.width(),this.animation.target=this.animation.arr[Math.floor(Math.random()*this.animation.arr.length)],1==this.animation.target?this.ifEdgePointHorizontal(this.animation.index)>-1?this.animation.rightToLeft(this.itemsInRow,this.duration):this.animation.leftToRight(this.itemsInRow,this.duration):2==this.animation.target&&(this.animation.index<=this.itemsInRow-1?this.animation.topToBottom(this.itemsInRow,this.duration):this.animation.index>=d-this.itemsInRow&&this.animation.index<=d-1?this.animation.bottomToTop(this.itemsInRow,this.duration):this.animation.topToBottom(this.itemsInRow,this.duration))}.bind(this),200)},bottomToTop:function(a,b){return this.choosenItemSecond=c.children().eq(this.index-a),0!==this.choosenItemSecond.length&&(this.choosenItemSecondHeight=this.choosenItemSecond.height(),this.firstItemPosition=this.choosenItemFirst.css("top"),this.secondItemPosition=this.choosenItemSecond.css("top"),this.moveDistance1=parseInt(this.firstItemPosition)-this.choosenItemFirstHeight,this.moveDistance2=parseInt(this.secondItemPosition)+this.choosenItemSecondHeight,this.choosenItemFirst.stop(!0,!0).animate({top:this.moveDistance1},b),this.choosenItemSecond.stop(!0,!0).animate({top:this.moveDistance2},b),setTimeout(function(){this.swapElements(this.choosenItemFirst[0],this.choosenItemSecond[0],this.choosenItemFirst,this.choosenItemSecond)}.bind(this),b+100),void 0)},topToBottom:function(a,b){return this.choosenItemSecond=c.children().eq(this.index+a),0!==this.choosenItemSecond.length&&(this.choosenItemSecondHeight=this.choosenItemSecond.height(),this.firstItemPosition=this.choosenItemFirst.css("top"),this.secondItemPosition=this.choosenItemSecond.css("top"),this.moveDistance1=parseInt(this.firstItemPosition)+this.choosenItemFirstHeight,this.moveDistance2=parseInt(this.secondItemPosition)-this.choosenItemSecondHeight,this.choosenItemFirst.stop(!0,!0).animate({top:this.moveDistance1},b),this.choosenItemSecond.stop(!0,!0).animate({top:this.moveDistance2},b),setTimeout(function(){this.swapElements(this.choosenItemFirst[0],this.choosenItemSecond[0],this.choosenItemFirst,this.choosenItemSecond)}.bind(this),b+100),void 0)},leftToRight:function(a,b){return this.choosenItemSecond=c.children().eq(this.index+1),0!==this.choosenItemSecond.length&&(this.choosenItemSecondWidth=this.choosenItemSecond.width(),this.firstItemPosition=this.choosenItemFirst.css("left"),this.secondItemPosition=this.choosenItemSecond.css("left"),this.moveDistance1=parseInt(this.firstItemPosition)+this.choosenItemFirstWidth,this.moveDistance2=parseInt(this.secondItemPosition)-this.choosenItemSecondWidth,this.choosenItemFirst.stop(!0,!0).animate({left:this.moveDistance1},b),this.choosenItemSecond.stop(!0,!0).animate({left:this.moveDistance2},b),setTimeout(function(){this.swapElements(this.choosenItemFirst[0],this.choosenItemSecond[0],this.choosenItemFirst,this.choosenItemSecond)}.bind(this),b+100),void 0)},rightToLeft:function(a,b){return this.choosenItemSecond=c.children().eq(this.index-1),0!==this.choosenItemSecond.length&&(this.choosenItemSecondWidth=this.choosenItemSecond.width(),this.firstItemPosition=this.choosenItemFirst.css("left"),this.secondItemPosition=this.choosenItemSecond.css("left"),this.moveDistance1=parseInt(this.firstItemPosition)-this.choosenItemFirstWidth,this.moveDistance2=parseInt(this.secondItemPosition)+this.choosenItemSecondWidth,this.choosenItemFirst.stop(!0,!0).animate({left:this.moveDistance1},b),this.choosenItemSecond.stop(!0,!0).animate({left:this.moveDistance2},b),setTimeout(function(){this.swapElements(this.choosenItemFirst[0],this.choosenItemSecond[0],this.choosenItemFirst,this.choosenItemSecond)}.bind(this),b+100),void 0)},swapElements:function(a,b,d,e){var f,g,h,i;f=a.parentNode,g=a.nextSibling,h=b.parentNode,i=b.nextSibling,f.insertBefore(b,g),h.insertBefore(a,i),c.children().css("left",0),c.children().css("top",0)}},getRandomInt:function(a){return Math.floor(Math.random()*(a-0+1))+0},ifEdgePointHorizontal:function(a){return this.animation.edgeNumbers.indexOf(a)},closestHighter:function(a,b,c){var d=Math.max.apply(null,a);if(b>d)return c(0),!1;for(var e=0;e<a.length;e++)a[e]>=b&&a[e]<d&&(d=a[e]);return c(d),!1}};void 0===b.responsive||null===b.responsive?f.setValues(b.itemsInRow,b.time,b.duration):f.setValuesByWidth(),a(window).bind("resize",function(b){window.resizeEvt,a(window).resize(function(){clearTimeout(window.resizeEvt),window.resizeEvt=setTimeout(function(){clearInterval(e),f.setValuesByWidth()},250)})})}}(jQuery);